!function(){"use strict";var a=angular.module("angular-treeList",["angular.filter"]);a.directive("treeList",[function(){return{restrict:"AE",require:["ngModel"],scope:{ngModel:"=",root:"=?",nodeId:"@",pid:"@",label:"@",expandCss:"@",collapseCss:"@",nodeActiveCss:"@",defaultNodeCss:"@",nodeCss:"@",order:"@",expandToDepth:"=?",nodeClick:"&",labelCss:"@",canCheck:"=?"},controller:"angular-treeListCtrl",templateUrl:"angular-treeList.tpl.html"}}]),a.controller("angular-treeListCtrl",["$scope",function(a){a.nodeId=a.nodeId||"id",a.pid=a.pid||"pid",a.label=a.label||"title",a.root=a.root||null,a.expandToDepth=a.expandToDepth||1,a.expandCss=a.expandCss||"glyphicon glyphicon-triangle-right",a.collapseCss=a.collapseCss||"glyphicon glyphicon-triangle-bottom",a.nodeActiveCss=a.nodeActiveCss||"buildInNodeActive",a.defaultNodeCss=a.defaultNodeCss||"glyphicon glyphicon-star",a.$rootFilter={},a.$rootFilter[a.pid]=a.root}]),a.directive("treeNode",[function(){return{restrict:"AE",require:["ngModel"],scope:{ngModel:"=",node:"=?",root:"=",nodeId:"@",pid:"@",label:"@",expandCss:"@",collapseCss:"@",nodeActiveCss:"@",defaultNodeCss:"@",nodeCss:"@",order:"@",deep:"=",expandToDepth:"=?",nodeClick:"&",labelCss:"@",canCheck:"=?"},controller:"angular-treeNodeCtrl",templateUrl:"angular-treeNode.tpl.html"}}]),a.controller("angular-treeNodeCtrl",["$scope","$filter",function(a,b){var c=b("where");a.$childrenFilter={},a.$childrenFilter[a.pid]=a.node[a.nodeId],a.$parentFilter={},a.$parentFilter[a.nodeId]=a.node[a.pid],a.expandClass={},a.expandClass[!0]=a.collapseCss,a.expandClass[!1]=a.expandCss,a.nodeActiveClass={},a.nodeActiveClass[!0]=a.nodeActiveCss,a.onNodeExpand=function(a){a.expand=!a.expand},a.onNodeSelected=function(b){var c=[],d=[];a.findAllParent(b,c);for(var e=0;e<c.length;e++){var f=c[e];b.checked&&!f.disableSelect&&(f.checked=!0)}a.findAllChildren(b,d);for(var e=0;e<d.length;e++){var g=d[e];g.disableSelect||(g.checked=b.checked)}},a.findAllParent=function(b,d){var e={};e[a.nodeId]=b[a.pid];var f=c(a.ngModel,e);if(f.length>0){var g=f[0];d.push(g),a.findAllParent(g,d)}},a.findAllChildren=function(b,d){var e={};e[a.pid]=b[a.nodeId];for(var f=c(a.ngModel,e),g=0;g<f.length;g++){var h=f[g];d.push(h),a.findAllChildren(h,d)}},a.$nodeClick=function(b,c){for(var d=0;d<a.ngModel.length;d++){var e=a.ngModel[d];e.active=!1}b.active=!0,a.nodeClick({$node:b,$parentNode:c})}}])}();
angular.module('angular-treeList').run(['$templateCache', function($templateCache) {
  'use strict';

  $templateCache.put('angular-treeList.tpl.html',
    "<div ng-if=\"(ngModel|where:$rootFilter).length>0\" class=angular-treeList><tree-node ng-model=ngModel deep=1 expand-to-depth=expandToDepth node=ngModel|where:$rootFilter|first node-click=nodeClick({$node:$node,$parentNode:$parentNode}) node-id={{nodeId}} pid={{pid}} root=root label={{label}} expand-css={{expandCss}} collapse-css={{collapseCss}} node-active-css={{nodeActiveCss}} node-css={{nodeCss}} default-node-css={{defaultNodeCss}} order={{order}} label-css={{labelCss}} can-check=canCheck></tree-node></div>"
  );


  $templateCache.put('angular-treeNode.tpl.html',
    "<ul ng-class=\"{'angular-treeList-root':(ngModel|where:$parentFilter|first)==null}\" ng-if=\"(ngModel|where:$parentFilter|first)==null||(ngModel|where:$parentFilter|first).expand\" ng-init=\" node.expand = (deep<expandToDepth)?true:false \"><li><i ng-show=\"(ngModel|where:$childrenFilter).length>0\" ng-class=expandClass[node.expand||false] ng-click=onNodeExpand(node)></i> <i class=\"glyphicon glyphicon-leaf blank\" ng-show=\"(ngModel|where:$childrenFilter).length==0\"></i> <i ng-class=\"{true:node[nodeCss],false:defaultNodeCss}[node[nodeCss]!=null]\"></i> <input type=checkbox ng-model=node.checked ng-disabled=node.disableSelect ng-change=onNodeSelected(node) ng-if=canCheck> <span class={{labelCss}} ng-class=nodeActiveClass[node.active||false] ng-click=$nodeClick(node,(ngModel|where:$parentFilter|first))>{{node[label]}}</span><tree-node ng-model=ngModel ng-repeat=\"child in ngModel|where:$childrenFilter|orderBy:order\" deep=deep+1 expand-to-depth=expandToDepth node=child node-click=nodeClick({$node:$node,$parentNode:$parentNode}) node-id={{nodeId}} pid={{pid}} root=root label={{label}} expand-css={{expandCss}} collapse-css={{collapseCss}} node-active-css={{nodeActiveCss}} node-css={{nodeCss}} default-node-css={{defaultNodeCss}} order={{order}} label-css={{labelCss}} can-check=canCheck></tree-node></li></ul>"
  );

}]);
